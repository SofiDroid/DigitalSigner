<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name = "dataSet" />
        <cc:attribute name = "height" />
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <p:dataTable id="#{cc.attrs.id}" widgetVar="#{cc.attrs.id}" var="itemRow" value="#{cc.attrs.dataSet.rows}" scrollable="true" scrollHeight="100%" 
                     style="height: #{cc.attrs.height};width:100%;padding:0.2rem" size="small">
            <p:columns value="#{cc.attrs.dataSet.cabecera.columns}" columnIndexVar="indexCol" var="itemColumn"
                       headerText="#{itemColumn.title}" visible="#{itemColumn.visible}" width="#{itemColumn.width}"
                       sortable="true" sortBy="#{itemRow.getColumnName(itemColumn.name)[itemColumn.valueProperty]}">
                <p:column>
                    <p:outputPanel rendered="#{itemColumn.tipo eq 'TEXTO'}">
                        <span title="#{itemRow.getColumnName(itemColumn.name)[itemColumn.tooltip]}">
                            #{itemRow.getColumnName(itemColumn.name)[itemColumn.valueString]}
                        </span>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{itemColumn.tipo eq 'LINK'}">
                        <p:commandLink id="btnLink"
                                title="#{itemRow.getColumnName(itemColumn.name)[itemColumn.tooltip]}"
                                value="#{itemRow.getColumnName(itemColumn.name)[itemColumn.valueString]}"
                                action="#{itemColumn.ejecutarMetodo}"
                                update="#{itemColumn.update}">
                            <f:setPropertyActionListener target="#{cc.attrs.dataSet.selectedRow}" value="#{itemRow}" />
                        </p:commandLink>
                    </p:outputPanel>
                </p:column>
            </p:columns>
        </p:dataTable>
    </cc:implementation>
</html>